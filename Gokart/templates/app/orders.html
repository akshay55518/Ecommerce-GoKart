{% extends "app/base.html" %}
{% load static %}
{% block title %}Orders{% endblock title %}

{% block main-content %}

<div class="container my-5">
    <h1 class="text-center mb-4">My Orders</h1>

    <div class="row justify-content-center gap-3">
        {% if order %}
            {% for i in order %}
            <div class="col-12 order-card p-3 {% if i.status == 'Cancelled' %}bg-light text-muted{% else %}bg-white{% endif %}">
                <div class="row g-3">
                    <div class="col-md-3">
                        <img class="img-fluid" height="200" src="{{i.product.product_image.url}}" alt="{{i.product.title}}">
                    </div>
                    <div class="col-md-9">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h5 class="text-capitalize">{{ i.product.title }}</h5>
                            {% if i.status == 'Accepted' %}
                                <span class="btn btn-secondary order-status-btn">{{ i.status }}</span>
                            {% elif i.status == 'Packed' %}
                                <span class="btn btn-warning order-status-btn">{{ i.status }}</span>
                            {% elif i.status == 'Rejected' %}
                                <span class="btn btn-danger order-status-btn">{{ i.status }}</span>
                            {% elif i.status == 'Pending' %}
                                <span class="btn btn-dark order-status-btn">{{ i.status }}</span>
                            {% elif i.status == 'On the Way' %}
                                <span class="btn btn-primary order-status-btn">{{ i.status }}</span>
                            {% elif i.status == 'Cancelled' %}
                                <span class="btn btn-secondary disabled order-status-btn">{{ i.status }}</span>
                            {% else %}
                                <span class="btn btn-success order-status-btn">{{ i.status }}</span>
                            {% endif %}
                        </div>

                        <table class="table table-borderless mb-2">
                            <tr>
                                <td class="fw-bold">Description:</td>
                                <td class="text-truncate" style="max-width:500px;">{{i.product.description}}</td>
                            </tr>
                            <tr>
                                <td class="fw-bold">Price:</td>
                                <td>â‚¹{{i.product.selling_price}}</td>
                            </tr>
                            <tr>
                                <td class="fw-bold">Quantity:</td>
                                <td>{{i.quantity}}</td>
                            </tr>
                            <tr>
                                <td class="fw-bold">Address:</td>
                                <td>{{i.customer.name}}, {{i.customer.address}}, {{i.customer.city}}, {{i.customer.state}}, {{i.customer.zipcode}}</td>
                            </tr>
                            <tr>
                                <td class="fw-bold">Mobile:</td>
                                <td>{{i.customer.mobile}}</td>
                            </tr>
                        </table>

                        <div class="d-flex justify-content-end">
                            {% if i.status == 'Delivered' %}
                                <a href="{% url 'return-order' i.id %}" class="btn btn-danger order-action-btn">Return Item</a>
                            {% elif i.status in 'Rejected Cancelled' %}
                                <button class="btn btn-danger order-action-btn" disabled>Cancel Order</button>
                            {% else %}
                                <a href="" class="btn btn-danger order-action-btn">Cancel Order</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-center">No orders yet!</p>
        {% endif %}
    </div>
</div>


    {% endblock main-content %}